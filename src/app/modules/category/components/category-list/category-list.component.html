<!-- <div class="card card-flush">
    <div class="table-responsive p-8" style="min-height: 500px;" [ngClass]="{'table-loading': isLoading}">
        <div class="table-loading-message">
            Yükleniyor...
        </div>

        <table class="table table-row-bordered gy-5">
            <thead>
                <tr class="fw-bolder fs-6 text-gray-800">
                    <th>Resim</th>
                    <th>İsim</th>
                    <th>Statü</th>
                    <th>İşlemler</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let category of categories.items">
                    <td><img class="small-thumb-image" *ngIf="category.image && category.image.imagePath"
                            [src]="category.image.imagePath | apiUrl"></td>
                    <td>{{category.name}}</td>
                    <td>{{category.isActive ? 'Aktif' : 'Pasif'}}</td>
                    <td>
                        <button class="btn btn-sm btn-secondary" style="margin-right: .5rem;" (click)="onEditCategoryClick(category)"><i class="fas fa-edit"></i></button>
                        <button class="btn btn-sm btn-danger" (click)="onDeleteCategory(category)"><i class="fas fa-trash"></i></button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div> -->

<div class="card card-flush">
  <div
    class="table-responsive p-8"
    style="min-height: 500px"
    [ngClass]="{ 'table-loading': isLoading }"
  >
    <div class="table-loading-message">Loading...</div>

    <!-- <div class="mb-4">
            <app-search (searchTextOutput)="searchTriggered($event)"></app-search>
        </div> -->

    <mat-accordion id="categoryBaseTree">
      <mat-expansion-panel
        class="category-wrapper w-100"
        *ngFor="let category of categories.items; let i = index"
      >
        <mat-expansion-panel-header
          [ngClass]="{ 'selected-category': category.isOpened }"
        >
          <mat-panel-title>
            <img
              class="small-thumb-image"
              *ngIf="category.image && category?.image?.imagePath"
              [src]="category.image.imagePath | apiUrl"
            />
            {{ i + 1 }}.
            {{ category.name }}

            <div class="d-flex ml-auto">
              <!-- <span *ngIf="category.isOpened && i!=0" (click)="onChangePositionUpClick(category.id)"
                                class="icon-button">
                                <i class="bi bi-chevron-up fs-7"></i>
                            </span> -->

              <!-- <span *ngIf="category.isOpened && i!=categories.data.length - 1"
                                (click)="onChangePositionDownClick(category.id)" class="icon-button">
                                <i class="bi bi-chevron-down fs-7"></i>
                            </span> -->

              <span
                (click)="onEditCategoryClick(category)"
                title="Edit"
                class="icon-button"
              >
                <i class="bi bi-pencil-fill fs-7"></i>
              </span>

              <span
                (click)="onDeleteCategory(category)"
                title="Delete"
                class="icon-button"
              >
                <i class="bi bi-trash-fill fs-7"></i>
              </span>
            </div>
          </mat-panel-title>
          <!-- <mat-panel-description>
                    </mat-panel-description> -->
        </mat-expansion-panel-header>
        <div *ngIf="category.children && category.children.length > 0">
          <app-category
            (onDeleteCategory)="onDeleteCategory($event)"
            [categoryChilds]="category.children"
          ></app-category>
        </div>
      </mat-expansion-panel>
    </mat-accordion>

    <ngb-pagination
      [maxSize]="5"
      [ellipses]="true"
      *ngIf="!waitForSycn"
      [collectionSize]="categories.count"
      [pageSize]="params.Count"
      [page]="params.Page + 1"
      (pageChange)="onPageChange($event)"
      size="sm"
      [boundaryLinks]="true"
    >
    </ngb-pagination>
  </div>
</div>
